<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // o/p should be 1 2 3 but we get 2 3 1 ,because here code is running Asynchronously in this case 2 will get print fist because of it will take only 3secs 
        // Note:here whole Asynchronous code get Executed in 5 sec only
        // setTimeout(function(){
        //     console.log(1)
        // },5000)

        
        // setTimeout(function(){
        //     console.log(2)
        // },3000)

        
        // setTimeout(function(){
        //     console.log(3)
        // },4000)

        // if we have to print  1 2 3 then we have to write the code inside of another
        // Note:here whole Asynchronous code get Executed in total 12 sec only
        // setTimeout(function (){
        //     console.log(1)

        //     setTimeout(function() {
        //         console.log(2)

        //         setTimeout(function() {
        //         console.log(3)
        //     },4000)
        //     },3000)

            
           

        // },5000)

        /*
			Order placed 
			After 2s -> Chef received the order and started preparing
			After 10s -> Pizza Sauce added
			After 5s -> First layer of cheeze added
			After 12s -> Toppings added
			After 5s -> Second layer of cheeze added
			After 15s -> Pizza baked!
			After 8s -> Oregano added and packed
			After 2s -> Package received at counter
			The order is ready and handed over to the Zomato delivery guy!
		*/
        // My version
        // console.log('Order Placed')
        //     setTimeout(() => {
        //         console.log('Chef received the order and started preparing')

        //         setTimeout(() => {
        //             console.log('Pizza Sauce added')

        //             setTimeout(() => {
        //                 console.log('First layer of cheeze added')

        //                 setTimeout(() => {
        //                     console.log('Toppings addedd')

        //                     setTimeout(() => {
        //                         console.log('Second layer of cheeze added')

        //                         setTimeout(() => {
        //                             console.log('Pizza baked!')

        //                             setTimeout(() => {
        //                                 console.log('Oregano added and packed')


        //                                 setTimeout(() => {
        //                                     console.log('Package received at counter')


        //                                     console.log('The order is ready and handed over to the Zomato delivery guy!')
        //                                 }, 2000)

        //                             }, 8000)


        //                         }, 15000)
        //                     }, 5000)

        //                 }, 12000)

        //             }, 5000)

        //         }, 10000)
        //     }, 2000);


        // callback Hell - When callback calling callback repeatedly, it forms a structure like below.
        // console.log('Order Placed')
        // function executeCode(callback) {
        //         setTimeout(() => {
        //             console.log('Chef received the order and started preparing')
        //             setTimeout(() => {
        //                 console.log('Pizza Sauce added')
        //                 setTimeout(() => {
        //                     console.log('First layer of cheeze added')
        //                     setTimeout(() => {
        //                         console.log('Toppings addedd')
        //                         setTimeout(() => {
        //                             console.log('Second layer of cheeze added')
        //                             setTimeout(() => {
        //                                 console.log('Pizza baked!')
        //                                 setTimeout(() => {
        //                                     console.log('Oregano added and packed')
        //                                     setTimeout(() => {
        //                                         console.log('Package received at counter')
        //                                         callback();
        //                                         // console.log('The order is ready and handed over to the Zomato delivery guy!')
        //                                     }, 2000)
        //                                 }, 8000)
        //                             }, 15000)
        //                         }, 5000)
        //                     }, 12000)
        //                 }, 5000)
        //             }, 10000)
        //         }, 2000);
        //     }
        // executeCode(function(){
        //     console.log('The order is ready and handed over to the Zomato delivery guy!')
        // })


 
        // This is done by Promise Chaining 
 const ChefReceived = () =>{
            return new Promise((resolve,reject)=>{
                setTimeout(() => {
                    console.log('Chef received the order and started preparing')
                    resolve()
                }, 2000);
            })
        }
        const PizzaSauceAdded = () =>{
            return new Promise((resolve, reject)=>{
                setTimeout(() => {
                    console.log('Pizza Sauce added')
                    resolve()
                }, 10000)
            })
        }
        const FirstLayerOfCheezeAdded = () =>{
            return new Promise((resolve, reject)=>{
                setTimeout(() => {
                    console.log('First layer of cheeze added')
                    resolve()
                }, 5000)
            })
        }
        const ToppingsAddedd = () =>{
            return new Promise((resolve, reject)=>{
                setTimeout(() => {
                    console.log('Toppings addedd')
                    resolve()
                }, 12000)
            })
        }

    const SecondLayerOfCheezeAdded = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('Second layer of cheeze added')
                resolve()
            }, 5000)
        })
    }
    const pizzaBaked = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('Pizza baked!')
                resolve()
            }, 15000)
        })
    }
    const OreganoAddedAndPacked = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('Oregano added and packed')
                resolve()
            }, 8000)
        })
    }
    
    const PackageReceivedAtCounter = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('Package received at counter')
                resolve()
            }, 2000)
        })
 }
 const  executeOrder= () => {
    console.log('Order placed')
    ChefReceived()
    .then(PizzaSauceAdded)
    .then(FirstLayerOfCheezeAdded)
    .then(ToppingsAddedd)
    .then(SecondLayerOfCheezeAdded)
    .then(pizzaBaked)
    .then(OreganoAddedAndPacked)
    .then(PackageReceivedAtCounter)
    .then(()=>console.log('The order is ready and handed over to the Zomato delivery guy!'))
    .catch((errr)=>console.log(err))
 }
    </script>
</head>
<body>
    <button onclick="executeOrder()">Execute Order</button>


       <!-- <button onclick="executeOrder(function(){
        console.log('The order is ready and handed over to the Zomato delivery guy!')
    })">Execute Order</button> -->
</body>
</html> 