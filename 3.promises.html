<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
 
    <div id="root"></div>
    <script>
        //  what is promises ?
        //  Promises are code which say => I promise a Result

        // 'Producing Code'  is a code that can take some time
        // 'Condition code ' is a code that must wait for the result

        // Syntax
        // let basicPromise = new Promise(function(resolve,reject){
            // Producing code which may take some time

            //only one of resolve or reject should be called
            
            // if promise get successful then it will give output as resolve otherwise it will return reject
//             resolve();
//             // reject();
// });

// Consuming code => Must wait for a fulfilled Promise
// basicPromise.then(function(value){
//     console.log("work done successfully with output",value)
// }, function(error){
//     console.log("Some error occurred",error)
// })
        

    //  states of promises      ||   Result of promises
    // pending                        undefined
    // fulfilled                      a result value
    // rejected                       an error object

    function display(data) {
        document.getElementById("root").innerHTML = data;
    }

    // real life example
    // login to fb using abc@fake.com 123456


    let promiseTemp = new Promise((myResolve,myReject) => {
        let x = 0;

        //  Producing code => which takes some time

        if(x===0) {
            setTimeout(()=> myResolve("All good"),4000)
        }
        else {
            myReject("Arrg! Something went wrong!")
        }
    })

    // promiseTemp.then(function(value){
    //     display(value)
    // },
    // function(error) {
    //     display(error)
    // })

    // promiseTemp.then(function(value){
    //     display(value)
    // }).catch(function(error){
    //     display(error)
    // })

    
    // Above both are same  
    // We can also use the arrow function type
    // promiseTemp.then(value => {
    //     display(value)
    // }).catch(error => {
    //     display(error)
    // })

    let p = new Promise((resolve,reject) => {
         setTimeout(() => {
            resolve(10)
         },4000)
    })
    
    // p.then(result => {
    //     console.log(result)
    //     return new Promise((resolve,reject) => {
    //         setTimeout(() => {
    //             resolve(result*2)},3000)
    //     })
    // }).then (result => {
    //     console.log(result)
    //     return new Promise((resolve,reject) =>{
    //         setTimeout(() => {
    //             resolve(result*3)},3000)
    //     })
    // }).then (result => {
    //     console.log(result)
    //     return  new Promise((resolve,reject) => {
    //         setTimeout(() => {
    //             resolve(result*4)
    //         },3000)
    //     })
    // }).then(result =>{ 
    //     console.log(result)
    // })

    // propereExample of A promise Chaining
    p.then((result) => {
        console.log(result)
        return new Promise((resolve,reject)=>{
            setTimeout(()=>{
                resolve(result*2)},3000)
        })
    }).then((result) =>{
        console.log(result)
        return new Promise((resolve,reject)=>{
            setTimeout(()=>{
                resolve(result/4)},2000)
        })
    }).then((result)=>{
        console.log(result)
        return new Promise((resolve,reject)=>{
            setTimeout(()=>{resolve(result*6)},3000)
        })
    }).then((result)=>{

        console.log(result)
    })


    // We learn three keyword Promise, .then, .catch 
    // in promise it contains always two arguments 1)Resolve 2)Reject
    // .then give the value of Resolve. 
    // .catch give the value of Reject. 
     
        </script>
</body>
</html>